# AutoPortFinder

autoportfinder/
├── cmd/                    # CLI-команды
│   └── root.go             # запуск CLI, flags, точки входа
├── internal/
│   ├── ports/              # логика поиска открытых портов
│   │   ├── scanner.go      # сканирование портов и соединений
│   │   └── resolver.go     # получение информации о процессе
│   ├── output/             # вывод информации
│   │   └── table.go        # табличный вывод
│   └── utils/              # утилиты: фильтрация, сортировка, логика
│       └── filter.go
├── go.mod
└── main.go                 # основная точка входа




Отличный выбор! 🎯 **AutoPortFinder** — реально полезный инструмент, который можно использовать каждый день, и он отлично подходит для прокачки Go на junior-to-middle уровне. Ниже — подробный **план разработки**, архитектура и список знаний/навыков, которые стоит подтянуть.

---

## 📌 Что делает AutoPortFinder

1. Находит **все занятые порты** на машине
2. Показывает **какие процессы** их используют
3. Позволяет фильтровать по:

    * порту
    * имени процесса
    * диапазону портов
4. (Опционально) Может:

    * послать сигнал на завершение процесса
    * вести лог по портам (кто и когда занял)
    * запускаться как daemon

---

## 🧱 Project architecture

```
┌────────────────────┐
│      CLI UI        │ ← текстовый интерфейс (cmd-флаги, меню)
└────────┬───────────┘
         │
         ▼
┌────────────────────┐
│  Port Scanner      │ ← обходит порты, находит PID/название
└────────┬───────────┘
         │
         ▼
┌────────────────────┐
│ Process Resolver   │ ← получает имя процесса по PID
└────────┬───────────┘
         │
         ▼
┌────────────────────┐
│ Logger / Exporter  │ ← сохраняет или выводит в json/csv
└────────────────────┘
```

---

## 📌 Функции по шагам

### 🔹 MVP (первая версия):

* [x] Получение списка всех занятых портов
* [x] Поиск PID процесса, использующего порт
* [x] Получение имени процесса
* [x] CLI-интерфейс: список, фильтрация, сортировка

### 🔸 Опционально:

* [ ] Убить процесс по порту
* [ ] Watch-режим (обновлять каждые X сек)
* [ ] REST API (показывать в браузере)
* [ ] Интеграция с системой логов
* [ ] Поддержка Windows/macOS/Linux

---

## 🧠 Что нужно знать

### 1. **Go Fundamentals**

* Структуры, методы, интерфейсы
* Goroutines (для watch-мода)
* Работа с флагами (`flag` или `cobra`)
* Форматированный вывод (`fmt`, `text/tabwriter`, `tablewriter`)

### 2. **Работа с сетью**

* Чтение данных о соединениях:

    * `netstat`, `ss` (Linux)
    * `lsof`, `nettop` (macOS)
    * `GetExtendedTcpTable` (Windows через Cgo)
* Чтение `/proc/net/tcp`, `/proc/net/udp` и `/proc/[pid]/fd` (на Linux)

### 3. **Работа с процессами**

* Получение PID и имени процесса
* Убийство процесса (`os.FindProcess`, `.Kill()`)

### 4. **CLI-интерфейс**

* `flag` или `urfave/cli`/`spf13/cobra` для удобства
* Отображение табличных данных (таблица портов/процессов)
* Вывод в разных форматах (JSON, CSV)

### 5. **(Опционально) REST API**

* Использовать `chi` или `fiber` или `echo`
* Поднять простой сервер, отдающий список портов по запросу

---

## 📦 Библиотеки, которые могут пригодиться

| Назначение          | Библиотека                  |
| ------------------- | --------------------------- |
| CLI                 | `spf13/cobra`, `urfave/cli` |
| Табличный вывод     | `olekukonko/tablewriter`    |
| Работа с процессами | `shirou/gopsutil`           |
| JSON-логирование    | `rs/zerolog`, `uber/zap`    |
| REST API (опц.)     | `chi`, `echo`, `fiber`      |

---

## 🏁 Примерные этапы разработки

| Этап | Описание                                                                     |
| ---- | ---------------------------------------------------------------------------- |
| 1.   | Научиться получать список портов через системные команды или `/proc/net/tcp` |
| 2.   | Найти PID процесса, который держит порт                                      |
| 3.   | Получить имя процесса по PID                                                 |
| 4.   | Вывод в таблице + фильтры                                                    |
| 5.   | Добавить CLI с параметрами поиска                                            |
| 6.   | (опц.) Возможность kill процесса                                             |
| 7.   | (опц.) Режим наблюдения: обновление каждые 5 секунд                          |
| 8.   | (опц.) REST API для вывода информации через браузер                          |

---

Хочешь — могу помочь:

* выбрать подходящий способ реализации (через `/proc`, `netstat`, lsof, psutil)
* создать стартовый шаблон проекта (main.go, структура, Makefile)
* или написать MVP

С чего хочешь начать?
